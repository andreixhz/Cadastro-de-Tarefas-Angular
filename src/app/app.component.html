<div class="mt-3 container">

  <h1>Gest√£o de tarefas</h1>

  <mat-card class="d-flex justify-content-between mb-2">
    <div class="d-flex align-items-center">
      <input class="input" placeholder="Pesquisar">

      <button class="mx-2" mat-raised-button color="primary">Pesquisar</button>
    </div>
  
    <div>
      <button mat-raised-button color="primary" (click)="addNew()">Criar Nova</button>
    </div>
  </mat-card>

  <div *ngIf="loading" class="col-12 justify-content-center d-flex mt-4">
    <mat-spinner
      [diameter]="50"
    ></mat-spinner>
  </div>

  <ng-container *ngIf="!loading">
    <ng-container *ngFor="let section of getSections()">
      <h1>{{tasks[section].title}}</h1>
      <mat-card class="mb-2" *ngFor="let task of tasks[section].rows">
      <mat-card-title>#{{ task.id }}</mat-card-title> 
      <mat-card-subtitle>{{ task.title }}</mat-card-subtitle>
      <mat-card-content>
        <p>{{ task.description }}</p>
      </mat-card-content>
      <mat-card-actions *ngIf="!task.finished">
        <button [disabled]="task.handing" (click)="handleFinalizateTask(task)" mat-button>Concluir</button>
        <button [disabled]="task.handing" (click)="handleDelete(task)" mat-button>Deletar</button>
      </mat-card-actions>
      <mat-card-footer *ngIf="task.handing">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </mat-card-footer>
    </mat-card>
    </ng-container>
  </ng-container>


</div>
